// stylelint-disable property-blacklist, scss/dollar-variable-default

// SCSS RFS mixin
//
// Automated font-resizing
//
// See https://github.com/twbs/rfs

// Configuration

// Base font size
$rfs-base-font-size: 1.25rem !default;
$rfs-font-size-unit: rem !default;

// Breakpoint at where font-size starts decreasing if screen width is smaller
$rfs-breakpoint: 1200px !default;
$rfs-breakpoint-unit: px !default;

// Resize font-size based on screen height and width
$rfs-two-dimensional: false !default;

// Factor of decrease
$rfs-factor: 10 !default;

@if type-of($rfs-factor) != "number" or $rfs-factor <= 1 ***REMOVED***
  @error "`#***REMOVED***$rfs-factor***REMOVED***` is not a valid  $rfs-factor, it must be greater than 1.";
***REMOVED***

// Generate enable or disable classes. Possibilities: false, "enable" or "disable"
$rfs-class: false !default;

// 1 rem = $rfs-rem-value px
$rfs-rem-value: 16 !default;

// Safari iframe resize bug: https://github.com/twbs/rfs/issues/14
$rfs-safari-iframe-resize-bug-fix: false !default;

// Disable RFS by setting $enable-responsive-font-sizes to false
$enable-responsive-font-sizes: true !default;

// Cache $rfs-base-font-size unit
$rfs-base-font-size-unit: unit($rfs-base-font-size);

// Remove px-unit from $rfs-base-font-size for calculations
@if $rfs-base-font-size-unit == "px" ***REMOVED***
  $rfs-base-font-size: $rfs-base-font-size / ($rfs-base-font-size * 0 + 1);
***REMOVED***
@else if $rfs-base-font-size-unit == "rem" ***REMOVED***
  $rfs-base-font-size: $rfs-base-font-size / ($rfs-base-font-size * 0 + 1 / $rfs-rem-value);
***REMOVED***

// Cache $rfs-breakpoint unit to prevent multiple calls
$rfs-breakpoint-unit-cache: unit($rfs-breakpoint);

// Remove unit from $rfs-breakpoint for calculations
@if $rfs-breakpoint-unit-cache == "px" ***REMOVED***
  $rfs-breakpoint: $rfs-breakpoint / ($rfs-breakpoint * 0 + 1);
***REMOVED***
@else if $rfs-breakpoint-unit-cache == "rem" or $rfs-breakpoint-unit-cache == "em" ***REMOVED***
  $rfs-breakpoint: $rfs-breakpoint / ($rfs-breakpoint * 0 + 1 / $rfs-rem-value);
***REMOVED***

// Responsive font-size mixin
@mixin rfs($fs, $important: false) ***REMOVED***
  // Cache $fs unit
  $fs-unit: if(type-of($fs) == "number", unit($fs), false);

  // Add !important suffix if needed
  $rfs-suffix: if($important, " !important", "");

  // If $fs isn't a number (like inherit) or $fs has a unit (not px or rem, like 1.5em) or $ is 0, just print the value
  @if not $fs-unit or $fs-unit != "" and $fs-unit != "px" and $fs-unit != "rem" or $fs == 0 ***REMOVED***
    font-size: #***REMOVED***$fs***REMOVED***#***REMOVED***$rfs-suffix***REMOVED***;
  ***REMOVED***
  @else ***REMOVED***
    // Variables for storing static and fluid rescaling
    $rfs-static: null;
    $rfs-fluid: null;

    // Remove px-unit from $fs for calculations
    @if $fs-unit == "px" ***REMOVED***
      $fs: $fs / ($fs * 0 + 1);
    ***REMOVED***
    @else if $fs-unit == "rem" ***REMOVED***
      $fs: $fs / ($fs * 0 + 1 / $rfs-rem-value);
    ***REMOVED***

    // Set default font-size
    @if $rfs-font-size-unit == rem ***REMOVED***
      $rfs-static: #***REMOVED***$fs / $rfs-rem-value***REMOVED***rem#***REMOVED***$rfs-suffix***REMOVED***;
    ***REMOVED***
    @else if $rfs-font-size-unit == px ***REMOVED***
      $rfs-static: #***REMOVED***$fs***REMOVED***px#***REMOVED***$rfs-suffix***REMOVED***;
    ***REMOVED***
    @else ***REMOVED***
      @error "`#***REMOVED***$rfs-font-size-unit***REMOVED***` is not a valid unit for $rfs-font-size-unit. Use `px` or `rem`.";
    ***REMOVED***

    // Only add media query if font-size is bigger as the minimum font-size
    // If $rfs-factor == 1, no rescaling will take place
    @if $fs > $rfs-base-font-size and $enable-responsive-font-sizes ***REMOVED***
      $min-width: null;
      $variable-unit: null;

      // Calculate minimum font-size for given font-size
      $fs-min: $rfs-base-font-size + ($fs - $rfs-base-font-size) / $rfs-factor;

      // Calculate difference between given font-size and minimum font-size for given font-size
      $fs-diff: $fs - $fs-min;

      // Base font-size formatting
      // No need to check if the unit is valid, because we did that before
      $min-width: if($rfs-font-size-unit == rem, #***REMOVED***$fs-min / $rfs-rem-value***REMOVED***rem, #***REMOVED***$fs-min***REMOVED***px);

      // If two-dimensional, use smallest of screen width and height
      $variable-unit: if($rfs-two-dimensional, vmin, vw);

      // Calculate the variable width between 0 and $rfs-breakpoint
      $variable-width: #***REMOVED***$fs-diff * 100 / $rfs-breakpoint***REMOVED***#***REMOVED***$variable-unit***REMOVED***;

      // Set the calculated font-size.
      $rfs-fluid: calc(#***REMOVED***$min-width***REMOVED*** + #***REMOVED***$variable-width***REMOVED***) #***REMOVED***$rfs-suffix***REMOVED***;
    ***REMOVED***

    // Rendering
    @if $rfs-fluid == null ***REMOVED***
      // Only render static font-size if no fluid font-size is available
      font-size: $rfs-static;
    ***REMOVED***
    @else ***REMOVED***
      $mq-value: null;

      // RFS breakpoint formatting
      @if $rfs-breakpoint-unit == em or $rfs-breakpoint-unit == rem ***REMOVED***
        $mq-value: #***REMOVED***$rfs-breakpoint / $rfs-rem-value***REMOVED***#***REMOVED***$rfs-breakpoint-unit***REMOVED***;
      ***REMOVED***
      @else if $rfs-breakpoint-unit == px ***REMOVED***
        $mq-value: #***REMOVED***$rfs-breakpoint***REMOVED***px;
      ***REMOVED***
      @else ***REMOVED***
        @error "`#***REMOVED***$rfs-breakpoint-unit***REMOVED***` is not a valid unit for $rfs-breakpoint-unit. Use `px`, `em` or `rem`.";
      ***REMOVED***

      @if $rfs-class == "disable" ***REMOVED***
        // Adding an extra class increases specificity,
        // which prevents the media query to override the font size
        &,
        .disable-responsive-font-size &,
        &.disable-responsive-font-size ***REMOVED***
          font-size: $rfs-static;
        ***REMOVED***
      ***REMOVED***
      @else ***REMOVED***
        font-size: $rfs-static;
      ***REMOVED***

      @if $rfs-two-dimensional ***REMOVED***
        @media (max-width: #***REMOVED***$mq-value***REMOVED***), (max-height: #***REMOVED***$mq-value***REMOVED***) ***REMOVED***
          @if $rfs-class == "enable" ***REMOVED***
            .enable-responsive-font-size &,
            &.enable-responsive-font-size ***REMOVED***
              font-size: $rfs-fluid;
            ***REMOVED***
          ***REMOVED***
          @else ***REMOVED***
            font-size: $rfs-fluid;
          ***REMOVED***

          @if $rfs-safari-iframe-resize-bug-fix ***REMOVED***
            // stylelint-disable-next-line length-zero-no-unit
            min-width: 0vw;
          ***REMOVED***
        ***REMOVED***
      ***REMOVED***
      @else ***REMOVED***
        @media (max-width: #***REMOVED***$mq-value***REMOVED***) ***REMOVED***
          @if $rfs-class == "enable" ***REMOVED***
            .enable-responsive-font-size &,
            &.enable-responsive-font-size ***REMOVED***
              font-size: $rfs-fluid;
            ***REMOVED***
          ***REMOVED***
          @else ***REMOVED***
            font-size: $rfs-fluid;
          ***REMOVED***

          @if $rfs-safari-iframe-resize-bug-fix ***REMOVED***
            // stylelint-disable-next-line length-zero-no-unit
            min-width: 0vw;
          ***REMOVED***
        ***REMOVED***
      ***REMOVED***
    ***REMOVED***
  ***REMOVED***
***REMOVED***

// The font-size & responsive-font-size mixin uses RFS to rescale font sizes
@mixin font-size($fs, $important: false) ***REMOVED***
  @include rfs($fs, $important);
***REMOVED***

@mixin responsive-font-size($fs, $important: false) ***REMOVED***
  @include rfs($fs, $important);
***REMOVED***
